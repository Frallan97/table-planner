Table Planner has been deployed!

Frontend: https://{{ (index .Values.ingress.hosts 0).host }}

== PRE-DEPLOYMENT SETUP ==

Before the first deployment, create the required secrets on the cluster:

1. Image pull secret (if not already created):

   kubectl create secret docker-registry ghcr-pull-secret \
     --docker-server=ghcr.io \
     --docker-username=frallan97 \
     --docker-password=<GITHUB_PAT> \
     --namespace={{ .Release.Namespace }}

2. Database secret:

   DB_PASSWORD=$(openssl rand -base64 24)
   kubectl create secret generic table-planner-db-secret \
     --from-literal=password="$DB_PASSWORD" \
     --from-literal=database-url="postgresql://{{ .Values.postgresql.auth.username }}:${DB_PASSWORD}@{{ include "table-planner.fullname" . }}-postgresql:5432/{{ .Values.postgresql.auth.database }}?sslmode=disable" \
     --namespace={{ .Release.Namespace }}

3. Register this application in the auth-service:

   INSERT INTO applications (name, origin, redirect_uris, is_active)
   VALUES (
     'Table Planner',
     'https://{{ (index .Values.ingress.hosts 0).host }}',
     ARRAY['https://{{ (index .Values.ingress.hosts 0).host }}/auth/callback'],
     true
   );
